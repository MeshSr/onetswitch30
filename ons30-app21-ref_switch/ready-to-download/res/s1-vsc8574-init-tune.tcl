################################################################################
### Pre-Requisite: Check the device revision.
################################################################################
# enable PHY0 mdio (mdio for PHY1-3 can also be used)
mw 43c00500 00000050;

# read Reg 2, which always returns 0x0007.
# 43c0050c: 00010007
mw 43c00504 10028800; sleep 1; md 43c0050c 1;

# read Reg 3, which could be 0x4a0, 0x4a1 or 0x4a2.
# Rev.A # 43c0050c: 000104a0
# Rev.B # 43c0050c: 000104a1
# Rev.D # 43c0050c: 000104a2
mw 43c00504 10038800; sleep 1; md 43c0050c 1;

################################################################################
### !!!IMPORTANT!!!
### Following script is ONLY required for Rev.A device, when in u-boot.
### For Rev.B and Rev.D devices, ignore the following in this tcl file.
################################################################################

################################################################################
### Rev.A (0007.04a0) Init. Script
###
### This is mandatory for Rev.A device in u-boot.
### Fixup is done in MeshSr kernel driver.
###
### Reference: Vitesse API_4_44\base\phy\phy_1g\vtss_phy_init_scripts.c
###            vtss_phy_pre_init_seq_tesla
###            ->  vtss_phy_pre_init_seq_tesla_4_april_2011
###
### Notice that 8051 config. is excluded.
################################################################################
mw 43c00508 00003201; mw 43c00504 10164800;
mw 43c00508 00002004; mw 43c00504 10184800;

mw 43c00508 00000002; mw 43c00504 101f4800;
mw 43c00508 000002f0; mw 43c00504 10104800;

mw 43c00508 00002a30; mw 43c00504 101f4800;
mw 43c00508 00000140; mw 43c00504 10144800;
mw 43c00508 0000180c; mw 43c00504 10094800;
mw 43c00508 00008012; mw 43c00504 10084800;

mw 43c00508 000052b5; mw 43c00504 101f4800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 00000011; mw 43c00504 10114800;
mw 43c00508 000096a0; mw 43c00504 10104800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 00007100; mw 43c00504 10114800;
mw 43c00508 000096a2; mw 43c00504 10104800;

mw 43c00508 000000d2; mw 43c00504 10124800;
mw 43c00508 0000547f; mw 43c00504 10114800;
mw 43c00508 0000968c; mw 43c00504 10104800;

mw 43c00508 000000f0; mw 43c00504 10124800;
mw 43c00508 0000f00d; mw 43c00504 10114800;
mw 43c00508 000096b0; mw 43c00504 10104800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 00007100; mw 43c00504 10114800;
mw 43c00508 000096b2; mw 43c00504 10104800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 0000345f; mw 43c00504 10114800;
mw 43c00508 000096b4; mw 43c00504 10104800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 0000f7df; mw 43c00504 10114800;
mw 43c00508 00008fd4; mw 43c00504 10104800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 0000f3df; mw 43c00504 10114800;
mw 43c00508 00008fd2; mw 43c00504 10104800;

mw 43c00508 0000000e; mw 43c00504 10124800;
mw 43c00508 00002b00; mw 43c00504 10114800;
mw 43c00508 00008fb0; mw 43c00504 10104800;

mw 43c00508 0000000b; mw 43c00504 10124800;
mw 43c00508 000005a0; mw 43c00504 10114800;
mw 43c00508 00008fe0; mw 43c00504 10104800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 000000ba; mw 43c00504 10114800;
mw 43c00508 00008fe2; mw 43c00504 10104800;

mw 43c00508 00000000; mw 43c00504 10124800;
mw 43c00508 00004689; mw 43c00504 10114800;
mw 43c00508 00008f92; mw 43c00504 10104800;

mw 43c00508 00000060; mw 43c00504 10124800;
mw 43c00508 00000980; mw 43c00504 10114800;
mw 43c00508 00008f90; mw 43c00504 10104800;

mw 43c00508 00002a30; mw 43c00504 101f4800;
mw 43c00508 00000012; mw 43c00504 10084800;

mw 43c00508 00000000; mw 43c00504 101f4800;
mw 43c00508 00003200; mw 43c00504 10164800;



################################################################################
### Rev.B (0007.04a1) Init. Script
###
### Reference: Vitesse API_4_44\base\phy\phy_1g\vtss_phy_init_scripts.c
###            vtss_phy_pre_init_seq_tesla
###            ->  vtss_phy_pre_init_seq_tesla_17_august_2011
###
### TODO: if something not good enough for Rev.B
################################################################################

################################################################################
### Rev.D (0007.04a2) Init. Script
###
### Reference: Vitesse API_4_44\base\phy\phy_1g\vtss_phy_init_scripts.c
###            vtss_phy_pre_init_seq_tesla
###            ->  vtss_phy_pre_init_seq_tesla_rev_d
###
### TODO: if something not good enough for Rev.D
################################################################################